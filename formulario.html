<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario Reserva</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="mi.css">
	<script type="application/javascript" src="scripts/lib.js" async></script>
    <script type="application/javascript" src="scripts/formulario.js" defer></script>
	


</head>

<body>
    <div class="container" id="hello">
        <header class="formulario ">
        </header>


        <div class="row mt-5" id="jumbo-ventas">

            <div class="col-md-5 animate__animated animate__zoomIn rounded border border-info p-4">
                <form id="forma">
                    <div class="form-group">
                        <label for="nombre">Nombre</label>
                        <input type="text" onkeyup="validarNombre(this.value)" class="form-control" name="nombre"
                            id="nombre" aria-describedby="emailHelp" placeholder="Introduce el nombre">
                        <p id="pNombre" style="display: none;">El nombre es obligatorio...</p>
                    </div>
                    <div class="form-group">
                        <label for="apellido">Apellido</label>
                        <input type="text" onkeyup="validarApellido(this.value)" class="form-control" name="apellido"
                            id="apellido" aria-describedby="emailHelp" placeholder="Introduce el nombre">
                        <p id="pApellido" style="display: none;">El apellido es obligatorio...</p>
                    </div>
                    <div class="form-group">
                        <label for="dni">Dni</label>
                        <input type="text" onkeyup="validarDni(this.value)" class="form-control" name="dni" id="dni"
                            placeholder="Introduce el dni">
                        <p id="pDni" style="display: none;">El DNI es obligatorio...</p>
                    </div>

                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" onkeyup="validarEmail(this.value)" class="form-control" name="email"
                            id="email" aria-describedby="emailHelp" placeholder="Enter email">
                        <p id="pEmail" style="display: none;">Email incorrecto...</p>
                    </div>
                    <div class="form-group">
                        <label for="nombreTitular">Nombre Titular Tarjeta</label>
                        <input type="text" onkeyup="validarTitularTarjeta(this.value)" class="form-control"
                            name="nombreTitular" id="nombreTitular" aria-describedby="emailHelp"
                            placeholder="Titular de la tarjeta">
                        <p id="pNombreTitular" style="display: none;">El nombre del titular es obligatorio...</p>
                    </div>
                    <div class="form-group">
                        <label for="pass">Numero de tarjet</label>
                        <input type="text" onkeyup="validarTarjeta(this.value)" class="form-control" id="pass"
                            placeholder="Numero de tarjeta">
                        <p id="pPass" style="display: none;">El numero de tarjeta es obligatorio</p>
                    </div>


                    <button type="button" class="btn btn-success"  id="submit" onclick="validarForm()" >Guardar
                        reservacion</button>
                </form>
            </div>
            <div class="col animate__animated animate__fadeInUp">
                <div class="row" id="jumbo">


                    <div class="jumbotron" id="pintarReserva">
                        <script type="text/javascript">
                            fecha();
                            function fecha() {
                                let Semana = ["domingo", "lunes", "martes", "miércoles", "jueves", "viernes", "sábado"];
                                let Mes = ["enero", "febrero", "marzo", "abril", "mayo", "junio", "julio", "agosto", "septiembre", "octubre", "noviembre", "diciembre"];

                                let fechaStringEntrada = localStorage.getItem("fechaEntrada");

                                let precioDia = 40;
                                let fechaEntradaDate = new Date(fechaStringEntrada);
                                let fechaSalidaString = localStorage.getItem("fechaSalida");
                                let fechaSalidaDate = new Date(fechaSalidaString);
                                let milisegundos = 24 * 60 * 60 * 1000;
                                let milisegundosTranscurridos = Math.abs(fechaEntradaDate.getTime() - fechaSalidaDate.getTime());
                                let diasTranscurridos = Math.round(milisegundosTranscurridos / milisegundos);
                                let diaSemana = fechaEntradaDate.getDay();
                                let hora = fechaEntradaDate.getHours() + 9;
                                let laSemana = Semana[diaSemana];
                                let numMes = fechaEntradaDate.getMonth();
                                let nombreMes = Mes[numMes];
                                let year = fechaEntradaDate.getFullYear();
                                var date = new Date();
                                let subTotal;
                                let precioFinal;
                                date.getDate()
                                let numPersonas = localStorage.getItem("numPersonas");

                                let imprimeReserva = '<h1 class"display-4">Tu reserva </h1>';
                                imprimeReserva += '<hr class="my-4">';
                                imprimeReserva += ' <h6>' + "(" + laSemana + ")" + " " + fechaEntradaDate.getDate() + " " + nombreMes + " " + year + " " + hora + " am" + '</h6>';
                                imprimeReserva += "<br></br>";

                                imprimeReserva += '<h6>' + "Incluye servicio a la habitacion" + '</h6>';


                                imprimeReserva += '<h6>' + "Total personas:" + " " + numPersonas + '</h6>';
                                imprimeReserva += "<br></br>";

                                subTotal = precioDia * numPersonas;
                                precioFinal = subTotal * diasTranscurridos;
                                imprimeReserva += '<h6>' + "Total a pagar:" + " " + precioFinal + "€" + '</h6>';

                                document.getElementById('pintarReserva').innerHTML = imprimeReserva;

                            }
                        </script>

                    </div>
                </div>
            </div>
        </div>
    </div>

    </div>
    </div>

    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
</body>

</html>